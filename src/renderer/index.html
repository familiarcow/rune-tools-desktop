<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THORChain Rune Tools</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .card {
            background-color: #2d2d2d;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        input, textarea, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #555;
            border-radius: 4px;
            background-color: #333;
            color: #fff;
            box-sizing: border-box;
        }
        button {
            background-color: #007acc;
            cursor: pointer;
            width: auto;
            padding: 10px 20px;
        }
        button:hover {
            background-color: #005999;
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        .address {
            font-family: monospace;
            background-color: #333;
            padding: 10px;
            border-radius: 4px;
            word-break: break-all;
        }
        .balance-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #444;
        }
        .error {
            color: #ff6b6b;
            background-color: #2d1b1b;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: #51cf66;
            background-color: #1b2d1b;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        /* Tab Navigation */
        .tab-container {
            margin: 20px 0;
        }
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #444;
            margin-bottom: 20px;
        }
        .tab-button {
            background-color: #2d2d2d;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            color: #ccc;
            border-bottom: 3px solid transparent;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin: 0;
            width: auto;
        }
        .tab-button:hover {
            background-color: #3d3d3d;
            color: #fff;
        }
        .tab-button.active {
            background-color: #007acc;
            color: #fff;
            border-bottom-color: #007acc;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        
        /* Network Status */
        .network-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #2d2d2d;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #444;
            font-size: 12px;
            font-weight: 500;
        }
        .network-mainnet {
            color: #51cf66;
            border-color: #51cf66;
        }
        .network-stagenet {
            color: #ffa726;
            border-color: #ffa726;
        }
        
        /* Memoless Specific Styles */
        .memoless-step {
            background-color: #2d2d2d;
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
            position: relative;
        }
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .step-number {
            background-color: #007acc;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        .step-title {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
        }
        .asset-dropdown {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            font-size: 14px;
        }
        .asset-option {
            background-color: #333;
            color: #fff;
            padding: 10px;
        }
        .amount-input-container {
            position: relative;
            margin: 15px 0;
        }
        .amount-preview {
            background-color: #1a1a1a;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #007acc;
        }
        .preview-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        .preview-amount {
            font-size: 16px;
            font-weight: 600;
            color: #51cf66;
            font-family: monospace;
        }
        .preview-usd {
            font-size: 14px;
            color: #ccc;
            margin-top: 5px;
        }
        
        /* Registration Overlay */
        .registration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .registration-modal {
            background-color: #2d2d2d;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid #444;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 20px;
        }
        .balance-display {
            background-color: #1a1a1a;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .balance-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        .balance-amount {
            font-size: 18px;
            font-weight: 600;
            color: #51cf66;
        }
        .fee-display {
            color: #ffa726;
            font-weight: 500;
        }
        
        /* QR Code Section */
        .qr-section {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            margin: 20px 0;
        }
        .qr-code-container {
            flex-shrink: 0;
        }
        .qr-placeholder {
            width: 200px;
            height: 200px;
            background-color: #333;
            border: 2px dashed #555;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            border-radius: 8px;
        }
        .instructions-container {
            flex: 1;
        }
        .copy-button {
            background-color: #444;
            border: 1px solid #666;
            color: #fff;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
            width: auto;
        }
        .copy-button:hover {
            background-color: #555;
        }
        .copy-section {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .copy-value {
            background-color: #333;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            flex: 1;
            word-break: break-all;
        }
        
        /* Network Switch Styles */
        .network-switch {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .network-switch input[type="radio"] {
            display: none;
        }
        .network-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border: 2px solid #444;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            background-color: #2d2d2d;
            color: #ccc;
            width: auto;
            margin: 0;
        }
        .network-option:hover {
            border-color: #666;
            color: #fff;
        }
        .network-option.mainnet-option {
            border-color: #51cf66;
        }
        .network-option.stagenet-option {
            border-color: #ffa726;
        }
        .network-switch input[type="radio"]:checked + .network-option.mainnet-option {
            background-color: #1b2d1b;
            border-color: #51cf66;
            color: #51cf66;
        }
        .network-switch input[type="radio"]:checked + .network-option.stagenet-option {
            background-color: #2d2418;
            border-color: #ffa726;
            color: #ffa726;
        }
        .network-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #666;
            transition: background-color 0.3s ease;
        }
        .mainnet-option .network-dot {
            background-color: #51cf66;
        }
        .stagenet-option .network-dot {
            background-color: #ffa726;
        }
        .network-switch input[type="radio"]:checked + .network-option .network-dot {
            box-shadow: 0 0 10px currentColor;
        }
        
        /* Amount Type Switch */
        .amount-type-switch input[type="radio"]:checked + .amount-type-option {
            background-color: #007acc;
            border-color: #007acc;
            color: #fff;
        }
        .amount-type-option:hover {
            border-color: #666;
            color: #fff;
        }
        
        /* Transaction Stage Styles */
        .stage-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 6px;
            border-left: 4px solid #444;
            background-color: #2d2d2d;
            transition: all 0.3s ease;
        }
        .stage-item.pending {
            border-left-color: #666;
            background-color: #2a2a2a;
        }
        .stage-item.started {
            border-left-color: #ffa726;
            background-color: #2d2418;
        }
        .stage-item.completed {
            border-left-color: #51cf66;
            background-color: #1b2d1b;
        }
        .stage-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        .stage-icon.pending {
            background-color: #666;
            color: #ccc;
        }
        .stage-icon.started {
            background-color: #ffa726;
            color: #fff;
        }
        .stage-icon.completed {
            background-color: #51cf66;
            color: #fff;
        }
        .stage-content {
            flex: 1;
        }
        .stage-name {
            font-weight: 500;
            color: #fff;
            margin-bottom: 2px;
        }
        .stage-details {
            font-size: 12px;
            color: #888;
        }
        .stage-item.started .stage-details {
            color: #ffb74d;
        }
        .stage-item.completed .stage-details {
            color: #81c784;
        }
    </style>
</head>
<body>
    <!-- Network Status Display -->
    <div id="networkStatus" class="network-status">
        <span id="networkDisplay">Loading...</span>
    </div>

    <div class="container">
        <h1>THORChain Rune Tools</h1>
        
        <!-- Tab Navigation -->
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" data-tab="wallet">Wallet & Tools</button>
                <button class="tab-button" data-tab="memoless" id="memolessTabBtn" disabled>Memoless</button>
            </div>
            
            <!-- Wallet & Tools Tab -->
            <div id="wallet" class="tab-content active">
                <!-- Network Switch Section -->
                <div class="card">
                    <h2>Network Settings</h2>
                    <div style="display: flex; align-items: center; gap: 15px; margin: 15px 0;">
                        <label style="font-weight: 500;">Network:</label>
                        <div class="network-switch">
                            <input type="radio" id="mainnetRadio" name="network" value="mainnet" checked>
                            <label for="mainnetRadio" class="network-option mainnet-option">
                                <span class="network-dot"></span>
                                Mainnet
                            </label>
                            <input type="radio" id="stagenetRadio" name="network" value="stagenet">
                            <label for="stagenetRadio" class="network-option stagenet-option">
                                <span class="network-dot"></span>
                                Stagenet
                            </label>
                        </div>
                        <small style="color: #888; margin-left: 10px;">
                            <span id="networkSwitchInfo">Memoless is only available on Stagenet</span>
                        </small>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Wallet Management</h2>
                    
                    <button id="generateSeedBtn">Generate New Seed Phrase</button>
                    
                    <div>
                        <label for="seedPhrase">Seed Phrase:</label>
                        <textarea id="seedPhrase" rows="3" placeholder="Enter or generate a seed phrase"></textarea>
                    </div>
                    
                    <button id="loadWalletBtn">Load Wallet</button>
                    
                    <div id="walletInfo" style="display: none;">
                        <h3>Wallet Information</h3>
                        <div><strong>Address:</strong></div>
                        <div id="walletAddress" class="address"></div>
                        <div><strong>Public Key:</strong></div>
                        <div id="walletPubKey" class="address"></div>
                    </div>
                </div>
        
        <div class="card">
            <h2>Balance Information</h2>
            <div style="margin: 10px 0;">
                <button id="fetchBalancesBtn" disabled>Fetch Balances (Raw)</button>
                <button id="fetchNormalizedBtn" disabled style="margin-left: 10px;">Fetch Normalized</button>
                <button id="testTradeAccountBtn" style="margin-left: 10px;">Test Trade Account</button>
            </div>
            <div id="balancesContainer"></div>
        </div>
        
        <div class="card">
            <h2>Swap Interface</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <!-- From Asset Section -->
                <div>
                    <h3>From Asset</h3>
                    <div>
                        <label for="fromAssetSelect">Select Asset:</label>
                        <select id="fromAssetSelect" style="width: 100%; padding: 10px; margin: 10px 0; background-color: #333; color: #fff; border: 1px solid #555;">
                            <option value="">Select from wallet...</option>
                        </select>
                    </div>
                    <div>
                        <label for="swapAmount">Amount:</label>
                        <input type="number" id="swapAmount" placeholder="0.00" step="any" min="0">
                        <div id="fromAssetBalance" style="font-size: 12px; color: #888; margin-top: 5px;"></div>
                        <div id="fromAssetUSD" style="font-size: 12px; color: #51cf66; margin-top: 5px;"></div>
                    </div>
                </div>
                
                <!-- To Asset Section -->
                <div>
                    <h3>To Asset</h3>
                    <div>
                        <label for="toAssetSelect">Select Asset:</label>
                        <select id="toAssetSelect" style="width: 100%; padding: 10px; margin: 10px 0; background-color: #333; color: #fff; border: 1px solid #555;">
                            <option value="">Select destination...</option>
                        </select>
                    </div>
                    <div>
                        <label for="assetVariant">Asset Variant:</label>
                        <select id="assetVariant" style="width: 100%; padding: 10px; margin: 10px 0; background-color: #333; color: #fff; border: 1px solid #555;">
                            <option value="secured">Secured Asset (Default)</option>
                            <option value="trade">Trade Asset</option>
                            <option value="native">Native Pool Asset</option>
                        </select>
                    </div>
                    <div id="toAssetUSD" style="font-size: 12px; color: #51cf66; margin-top: 5px;"></div>
                </div>
            </div>
            
            <!-- Quote Section -->
            <div id="quoteSection" style="display: none;">
                <h3>Quote Information</h3>
                <div id="quoteDisplay" style="background-color: #1a1a1a; padding: 15px; border-radius: 5px; margin: 10px 0;"></div>
                <div style="margin: 20px 0;">
                    <button id="getQuoteBtn" disabled>Get Quote</button>
                    <button id="executeSwapBtn" disabled style="margin-left: 10px;">Execute Swap</button>
                </div>
            </div>
            
            <!-- Transaction Tracking -->
            <div id="swapTracking" style="display: none;">
                <h3>Transaction Status</h3>
                <div id="trackingDisplay" style="background-color: #1a1a1a; padding: 15px; border-radius: 5px; margin: 10px 0;"></div>
            </div>
        </div>
        
        <div class="card">
            <h2>THORChain Network Data</h2>
            <div style="margin: 10px 0;">
                <button id="fetchNodeInfoBtn">Fetch Node Info</button>
                <button id="fetchPoolsBtn" style="margin-left: 10px;">Fetch Pools</button>
                <button id="fetchNetworkBtn" style="margin-left: 10px;">Fetch Network</button>
                <button id="fetchOraclePricesBtn" style="margin-left: 10px;">Fetch Oracle Prices</button>
            </div>
            <div id="nodeInfoContainer"></div>
            <div id="poolsContainer"></div>
            <div id="networkContainer"></div>
            <div id="oraclePricesContainer"></div>
        </div>
        
        <div class="card">
            <h2>Create Transaction</h2>
            
            <div>
                <label>Transaction Type:</label>
                <div style="margin: 10px 0;">
                    <label style="margin-right: 20px;">
                        <input type="radio" name="txType" value="send" checked> MsgSend (Standard Transfer)
                    </label>
                    <label>
                        <input type="radio" name="txType" value="deposit"> MsgDeposit (THORChain Operations)
                    </label>
                </div>
                <small style="color: #888;">
                    ‚Ä¢ MsgSend: Direct transfer to any address<br>
                    ‚Ä¢ MsgDeposit: Send to THORChain module for swaps, LP operations with memo
                </small>
            </div>
            
            <div>
                <label for="txAsset">Asset:</label>
                <input type="text" id="txAsset" placeholder="e.g., THOR.RUNE, BTC.BTC" value="THOR.RUNE">
            </div>
            
            <div>
                <label for="txAmount">Amount:</label>
                <input type="text" id="txAmount" placeholder="Amount in base units (e.g., 1000000 for 1 RUNE)">
            </div>
            
            <div id="toAddressSection">
                <label for="txToAddress">To Address:</label>
                <input type="text" id="txToAddress" placeholder="thor1...">
            </div>
            
            <div id="memoSection">
                <label for="txMemo">Memo <span id="memoRequired" style="color: #ff6b6b;">(Required)</span><span id="memoOptional" style="color: #888;">(Optional)</span>:</label>
                <input type="text" id="txMemo" placeholder="e.g., NOOP, SWAP:BTC.BTC:address, ADD:BTC.BTC">
                <div style="margin-top: 10px;">
                    <strong>Quick Examples:</strong><br>
                    <button class="memo-example" data-memo="NOOP" style="margin: 2px; padding: 5px 10px; font-size: 12px;">NOOP (Test)</button>
                    <button class="memo-example" data-memo="SWAP:BTC.BTC:bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh" style="margin: 2px; padding: 5px 10px; font-size: 12px;">SWAP to BTC</button>
                    <button class="memo-example" data-memo="ADD:BTC.BTC" style="margin: 2px; padding: 5px 10px; font-size: 12px;">Add Liquidity</button>
                </div>
                <small id="memoHelp" style="color: #888; display: block; margin-top: 10px;">
                    Use NOOP for testing. For real operations, use proper THORChain memo formats.
                </small>
            </div>
            
            <div style="margin: 20px 0;">
                <button id="estimateGasBtn" disabled>Estimate Gas</button>
                <button id="broadcastTxBtn" disabled>Broadcast Transaction</button>
            </div>
            
            <div id="txResult"></div>
        </div>
        
        <div class="card">
            <h2>Transaction Tracking</h2>
            
            <div>
                <label for="trackTxHash">Transaction Hash:</label>
                <input type="text" id="trackTxHash" placeholder="Enter transaction hash to track">
            </div>
            
            <div style="margin: 20px 0;">
                <button id="trackTxBtn">Track Transaction</button>
                <button id="pollTxBtn">Poll Until Complete</button>
                <button id="testSampleTxBtn">Test Sample TX</button>
            </div>
            
            <div id="trackingResult"></div>
            
            <!-- Enhanced Stages Display -->
            <div id="stagesDisplay" style="display: none; margin-top: 20px;">
                <h3>Transaction Progress</h3>
                <div id="stagesContainer" style="margin-top: 15px;"></div>
            </div>
        </div>
        
            </div>
            
            <!-- Memoless Tab -->
            <div id="memoless" class="tab-content">
                <div class="memoless-step">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">Select Asset</div>
                    </div>
                    <div>
                        <label for="assetSelect">Choose asset for memoless registration:</label>
                        <select id="assetSelect" class="asset-dropdown">
                            <option value="">Loading assets...</option>
                        </select>
                        <div id="assetPrice" style="font-size: 14px; color: #ccc; margin-top: 5px;"></div>
                    </div>
                </div>

                <div class="memoless-step" id="memoStep" style="display: none;">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">Enter Memo</div>
                    </div>
                    <div>
                        <label for="memoInput">Enter your memo (this will be linked to amount-based deposits):</label>
                        <input type="text" id="memoInput" placeholder="e.g., SWAP:BTC.BTC:address, ADD:BTC.BTC" style="width: 100%; margin: 10px 0;">
                        <small style="color: #888; display: block; margin-top: 5px;">
                            This memo will be registered and linked to your reference ID for future deposits.
                        </small>
                    </div>
                </div>

                <div class="memoless-step" id="amountStep" style="display: none;">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">Configure Amount</div>
                    </div>
                    <div>
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: 500;">Choose input type:</label>
                            <div class="amount-type-switch" style="display: flex; gap: 10px; margin: 10px 0;">
                                <input type="radio" id="amountTypeAsset" name="amountType" value="asset" checked style="display: none;">
                                <label for="amountTypeAsset" class="amount-type-option" style="padding: 8px 15px; border: 2px solid #444; border-radius: 20px; cursor: pointer; transition: all 0.3s ease; font-size: 14px; font-weight: 500; background-color: #2d2d2d; color: #ccc;">
                                    Asset Amount
                                </label>
                                <input type="radio" id="amountTypeUSD" name="amountType" value="usd" style="display: none;">
                                <label for="amountTypeUSD" class="amount-type-option" style="padding: 8px 15px; border: 2px solid #444; border-radius: 20px; cursor: pointer; transition: all 0.3s ease; font-size: 14px; font-weight: 500; background-color: #2d2d2d; color: #ccc;">
                                    USD Amount
                                </label>
                            </div>
                        </div>
                        
                        <label for="amountInput">Enter deposit amount:</label>
                        <div class="amount-input-container">
                            <input type="number" id="amountInput" placeholder="0.00" step="any" min="0" style="width: 100%; margin: 10px 0;">
                            <div id="amountInputLabel" style="font-size: 12px; color: #888; margin-top: -5px; margin-bottom: 10px;">
                                Enter amount in asset terms
                            </div>
                            <small style="color: #888; display: block;">
                                Amount will be encoded with your reference ID in the last decimal places.
                            </small>
                        </div>
                        <div class="amount-preview" id="amountPreview" style="display: none;">
                            <div class="preview-label">Final Amount (with reference encoding):</div>
                            <div class="preview-amount" id="previewAmount">0.00000000</div>
                            <div class="preview-usd" id="previewUSD">$0.00 USD</div>
                        </div>
                    </div>
                </div>

                <div class="memoless-step" id="depositStep" style="display: none;">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">Make Deposit</div>
                    </div>
                    <div class="qr-section">
                        <div class="qr-code-container">
                            <div id="qrPlaceholder" class="qr-placeholder">
                                QR Code will appear here
                            </div>
                        </div>
                        <div class="instructions-container">
                            <h4>Deposit Instructions</h4>
                            <p>Send <span style="color: #ff6b6b; font-weight: bold; font-style: italic;">Exactly</span> <strong id="depositAmount">0.00000000</strong> <span id="depositAssetName">BTC</span> on <span id="depositChain">BTC</span> to:</p>
                            
                            <div class="copy-section">
                                <span class="copy-value" id="depositAddress">Loading...</span>
                                <button class="copy-button" onclick="copyToClipboard('depositAddress')">Copy</button>
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <strong>Amount:</strong>
                                <div class="copy-section">
                                    <span class="copy-value" id="exactAmount">0.00000000</span>
                                    <button class="copy-button" onclick="copyToClipboard('exactAmount')">Copy</button>
                                </div>
                            </div>
                            
                            <div id="usageStats" style="margin-top: 15px; padding: 10px; background-color: #1b2d1b; border-radius: 6px; border-left: 4px solid #51cf66; display: none;">
                                <strong style="color: #51cf66;">üìä Registration Usage:</strong>
                                <div style="margin-top: 8px; color: #ccc;">
                                    <div>Used <span id="usageCount">0</span> of <span id="maxUse">3</span> times</div>
                                    <div style="font-size: 12px; margin-top: 4px;">Expires at block: <span id="expiresAt">N/A</span></div>
                                    <div id="expiryTimeContainer" style="font-size: 12px; margin-top: 2px; color: #ffa726; font-weight: 500; display: none;">
                                        Time remaining: <span id="expiryTime">Calculating...</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px; padding: 10px; background-color: #2d1b1b; border-radius: 6px; border-left: 4px solid #ff6b6b;">
                                <strong style="color: #ff6b6b;">‚ö†Ô∏è CRITICAL INSTRUCTIONS:</strong>
                                <ul style="margin: 10px 0; padding-left: 20px; color: #ccc;">
                                    <li><strong>Send EXACTLY the amount shown above</strong></li>
                                    <li>The amount encodes your reference ID in the decimal places</li>
                                    <li><strong>If you do not follow these instructions exactly, your funds may be irrecoverably lost</strong></li>
                                    <li><strong>Do not edit the amount to send under any circumstances</strong></li>
                                    <li><strong>Do not send with low gas rate</strong> - your transaction should be confirmed within 10 minutes or else you risk irrecoverable loss of funds</li>
                                    <li>After blockchain confirmation, you can track your transaction using your TX hash</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button id="startOverBtn" style="background-color: #666; margin-right: 10px;">Start Over</button>
                        <button id="trackDepositBtn" style="background-color: #007acc;">Track My Deposit</button>
                    </div>
                </div>

                <div class="memoless-step" id="errorStep" style="display: none;">
                    <div class="step-header">
                        <div class="step-number">‚ö†Ô∏è</div>
                        <div class="step-title">Error</div>
                    </div>
                    <div id="errorMessage" class="error">
                        An error occurred during the memoless process.
                    </div>
                    <div style="margin-top: 20px;">
                        <button id="restartBtn" onclick="restartMemolessFlow()">Start Over</button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button id="registerMemoBtn" style="display: none; background-color: #51cf66; font-size: 16px; padding: 15px 30px;">
                        Register Memo
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Registration Confirmation Overlay -->
        <div id="registrationOverlay" class="registration-overlay">
            <div class="registration-modal">
                <div class="modal-title">Confirm Memo Registration</div>
                
                <div style="text-align: left; margin: 20px 0;">
                    <div><strong>Asset:</strong> <span id="confirmAsset">BTC.BTC</span></div>
                    <div style="margin-top: 10px;"><strong>Memo:</strong> <span id="confirmMemo">SWAP:BTC.BTC:address</span></div>
                </div>
                
                <div class="balance-display">
                    <div class="balance-label">Your RUNE Balance</div>
                    <div class="balance-amount" id="confirmRuneBalance">0.00 RUNE</div>
                </div>
                
                <div style="margin: 15px 0;">
                    <div class="fee-display">Registration Fee: 0.02 RUNE</div>
                    <small style="color: #888; display: block; margin-top: 5px;">
                        A small fee is required to register your memo on-chain.
                    </small>
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button onclick="cancelRegistration()" style="background-color: #666; margin-right: 15px;">Cancel</button>
                    <button id="confirmRegistrationBtn" style="background-color: #51cf66;">Confirm Registration</button>
                </div>
            </div>
        </div>

        <!-- Transaction Tracking Modal -->
        <div id="trackingOverlay" class="registration-overlay" style="display: none;">
            <div class="registration-modal">
                <div class="modal-title">Track Your Transaction</div>
                
                <div style="text-align: left; margin: 20px 0;">
                    <p style="color: #ccc; margin-bottom: 15px;">
                        Enter your transaction hash to track it on the blockchain explorer:
                    </p>
                    
                    <label for="txidInput" style="font-weight: 500; display: block; margin-bottom: 8px;">Transaction Hash (TXID):</label>
                    <input type="text" id="txidInput" placeholder="Enter your transaction hash..." 
                           style="width: 100%; padding: 12px; margin: 0; background-color: #1a1a1a; color: #fff; border: 1px solid #555; border-radius: 6px; font-family: monospace; font-size: 14px; box-sizing: border-box;">
                    
                    <div style="margin-top: 10px; font-size: 12px; color: #888;">
                        <strong>Examples:</strong><br>
                        ‚Ä¢ Bitcoin: 1a2b3c4d5e6f... (64 characters)<br>
                        ‚Ä¢ Ethereum/BSC: 0x1a2b3c4d5e6f... (66 characters with 0x prefix)<br>
                        ‚Ä¢ Other chains: Various formats supported
                    </div>
                </div>
                
                <div id="trackingError" class="error" style="display: none; margin: 15px 0;">
                    Please enter a valid transaction hash.
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button onclick="closeTrackingModal()" style="background-color: #666; margin-right: 15px;">Cancel</button>
                    <button id="openExplorerBtn" onclick="openBlockExplorer()" style="background-color: #007acc;">Open Block Explorer</button>
                </div>
            </div>
        </div>

        <div id="messages"></div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>